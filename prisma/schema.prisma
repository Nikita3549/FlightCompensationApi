generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Flight {
  id           String              @id @default(uuid())
  isEligible   Boolean
  reason       CancellationReason?
  delayMinutes Int?                @default(0)

  arrivalDateLocal   String
  departureDateLocal String
  arrivalDateUtc     String
  departureDateUtc   String

  flightNumber String   @map("flight_number")
  date         DateTime

  airports Airport[]

  @@map("flights")
}

enum CancellationReason {
  cancellation
  delay

  @@map("cancellation_reason")
}

model Airport {
  id   String      @id @default(uuid())
  name String
  city String
  icao String
  iata String
  type AirportType

  flightId String
  flight   Flight @relation(fields: [flightId], references: [id])

  @@map("airports")
}

enum AirportType {
  DEPARTURE
  ARRIVAL
}
